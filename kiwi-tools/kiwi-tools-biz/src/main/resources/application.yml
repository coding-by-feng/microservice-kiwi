server:
  port: 9005
spring:
  servlet:
    multipart:
      max-file-size: 30MB
      max-request-size: 35MB
  mvc:
    pathmatch:
      matching-strategy: ant_path_matcher
  liquibase:
    change-log: classpath:db/changelog/db.changelog-master.xml
    enabled: true
logging:
  level:
    root: INFO
    me.fengorz.kiwi.tools: DEBUG

# MyBatis-Plus configuration to map enums via code values
mybatis-plus:
  configuration:
    # needed in general and harmless here
    map-underscore-to-camel-case: true
    # ensure enums use MybatisEnumTypeHandler (works with IEnum)
    default-enum-type-handler: com.baomidou.mybatisplus.extension.handlers.MybatisEnumTypeHandler
  # scan for enums (optional but helpful for older MP versions)
  type-enums-package: me.fengorz.kiwi.tools.model

# Storage backend switch
storage:
  backend: ftp

# Tools service custom properties
tools:
  cors-allowed-origins:
    - http://localhost:5173
  upload-dir: uploads
  public-base-url: ""
  write-rate-limit-per-min: 60
  upload-rate-limit-per-min: 30
  idempotency-ttl-minutes: 60
  allowed-statuses:
    - "glass_ordered"
    - "doors_windows_produced"
    - "doors_windows_delivered"
    - "doors_windows_installed"
    - "final_payment_received"
  # Max single photo upload enforced by ProjectPhotoService
  photo-max-size: 5MB
  # Max single video upload enforced by ProjectPhotoService
  video-max-size: 30MB

ignore:
  urls:
    - /api/**